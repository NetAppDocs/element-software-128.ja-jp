---
sidebar: sidebar 
permalink: mnode/task_mnode_manage_storage_cluster_assets.html 
summary: REST API UI を使用して、管理ノード ストレージ クラスター アセットを追加、削除、変更できます。 
keywords: netapp, mnode, management node, rest api, Element, assets 
---
= ストレージ クラスター アセットの作成と管理
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
REST API を使用して、管理ノードに新しいストレージ クラスター アセットを追加したり、既知のストレージ クラスター アセットの保存されている資格情報を編集したり、管理ノードからストレージ クラスター アセットを削除したりできます。

.要件
* ストレージ クラスタのバージョンでNetApp Elementソフトウェア 11.3 以降が実行されていることを確認します。
* バージョン 11.3 以降を実行している管理ノードがデプロイされていることを確認します。


.ストレージクラスター資産管理オプション
次のいずれかのオプションを選択します。

* <<ストレージ クラスタ アセットのインストール ID とクラスタ ID を取得します。>>
* <<新しいストレージクラスターアセットを追加する>>
* <<ストレージ クラスター アセットの保存された資格情報を編集する>>
* <<ストレージ クラスター アセットを削除する>>




== ストレージ クラスタ アセットのインストール ID とクラスタ ID を取得します。

REST API を使用して、インストール ID とストレージ クラスターの ID を取得できます。新しいストレージ クラスター アセットを追加するにはインストール ID が必要であり、特定のストレージ クラスター アセットを変更または削除するにはクラスター ID が必要です。

.手順
. 管理ノードのIPアドレスに続いて、インベントリサービスのREST API UIにアクセスします。 `/inventory/1/` :
+
[listing]
----
https://<ManagementNodeIP>/inventory/1/
----
. *承認*または任意のロックアイコンを選択し、次の手順に従います。
+
.. クラスターのユーザー名とパスワードを入力します。
.. クライアントIDを入力してください `mnode-client`。
.. セッションを開始するには、[承認] を選択します。
.. ウィンドウを閉じます。


. *GET /installations* を選択します。
. *試してみる*を選択します。
. *実行*を選択します。
+
API は、すべての既知のインストールのリストを返します。

. コード200のレスポンスボディから、値を `id`このフィールドはインストールのリストに表示されます。これはインストール ID です。例えば：
+
[listing, subs="+quotes"]
----
"installations": [
    {
      *"id": "1234a678-12ab-35dc-7b4a-1234a5b6a7ba",*
      "name": "my-sf-installation",
      "_links": {
        "collection": "https://localhost/inventory/1/installations",
        "self": "https://localhost/inventory/1/installations/1234a678-12ab-35dc-7b4a-1234a5b6a7ba"
      }
    }
  ]
----
. 管理ノードのIPアドレスに続いて、ストレージサービスのREST API UIにアクセスします。 `/storage/1/` :
+
[listing]
----
https://<ManagementNodeIP>/storage/1/
----
. *承認*または任意のロックアイコンを選択し、次の手順に従います。
+
.. クラスターのユーザー名とパスワードを入力します。
.. クライアントIDを入力してください `mnode-client`。
.. セッションを開始するには、[承認] を選択します。
.. ウィンドウを閉じます。


. *GET /clusters*を選択します。
. *試してみる*を選択します。
. 先ほど保存したインストールIDを `installationId`パラメータ。
. *実行*を選択します。
+
API は、このインストール内のすべての既知のストレージ クラスターのリストを返します。

. コード200のレスポンスボディから、正しいストレージクラスタを見つけ、その値をクラスタの `storageId`分野。これはストレージ クラスター ID です。




== 新しいストレージクラスターアセットを追加する

REST API を使用して、1 つ以上の新しいストレージ クラスター アセットを管理ノード インベントリに追加できます。新しいストレージ クラスター アセットを追加すると、管理ノードに自動的に登録されます。

.要件
* コピーしました<<ストレージ クラスタ アセットのインストール ID とクラスタ ID を取得します。,ストレージクラスタIDとインストールID>>追加するストレージ クラスターの場合。
* 複数のストレージノードを追加する場合は、link:../concepts/concept_intro_clusters.html#authoritative-storage-clusters["権威あるクラスター"]複数のストレージ クラスターのサポート。
+

NOTE: 権限のあるクラスターで定義されているすべてのユーザーは、 NetApp Hybrid Cloud Control インスタンスに関連付けられている他のすべてのクラスター上のユーザーとして定義されます。



.手順
. 管理ノードのIPアドレスに続いて、ストレージサービスのREST API UIにアクセスします。 `/storage/1/` :
+
[listing]
----
https://<ManagementNodeIP>/storage/1/
----
. *承認*または任意のロックアイコンを選択し、次の手順に従います。
+
.. クラスターのユーザー名とパスワードを入力します。
.. クライアントIDを入力してください `mnode-client`。
.. セッションを開始するには、[承認] を選択します。
.. ウィンドウを閉じます。


. *POST /clusters*を選択します。
. *試してみる*を選択します。
. *リクエスト本文* フィールドに次のパラメータで新しいストレージ クラスターの情報を入力します。
+
[listing]
----
{
  "installationId": "a1b2c34d-e56f-1a2b-c123-1ab2cd345d6e",
  "mvip": "10.0.0.1",
  "password": "admin",
  "userId": "admin"
}
----
+
|===
| パラメータ | タイプ | 説明 


| `installationId` | string | 新しいストレージ クラスターを追加するインストール。このパラメータに、先ほど保存したインストール ID を入力します。 


| `mvip` | string | ストレージ クラスターの IPv4 管理仮想 IP アドレス (MVIP)。 


| `password` | string | ストレージ クラスターとの通信に使用するパスワード。 


| `userId` | string | ストレージ クラスターとの通信に使用するユーザー ID (ユーザーには管理者権限が必要です)。 
|===
. *実行*を選択します。
+
API は、名前、バージョン、IP アドレス情報など、新しく追加されたストレージ クラスター アセットに関する情報を含むオブジェクトを返します。





== ストレージ クラスター アセットの保存された資格情報を編集する

管理ノードがストレージ クラスターにログインするために使用する保存された資格情報を編集できます。選択するユーザーにはクラスター管理者アクセス権が必要です。


NOTE: 以下の手順に従ってください。<<ストレージ クラスタ アセットのインストール ID とクラスタ ID を取得します。>>続行する前に。

.手順
. 管理ノードのIPアドレスに続いて、ストレージサービスのREST API UIにアクセスします。 `/storage/1/` :
+
[listing]
----
https://<ManagementNodeIP>/storage/1/
----
. *承認*または任意のロックアイコンを選択し、次の手順に従います。
+
.. クラスターのユーザー名とパスワードを入力します。
.. クライアントIDを入力してください `mnode-client`。
.. セッションを開始するには、[承認] を選択します。
.. ウィンドウを閉じます。


. *PUT /clusters/{storageId}* を選択します。
. *試してみる*を選択します。
. 先ほどコピーしたストレージクラスタIDを `storageId`パラメータ。
. *リクエスト本文* フィールドで、次のパラメータの 1 つまたは両方を変更します。
+
[listing]
----
{
  "password": "adminadmin",
  "userId": "admin"
}
----
+
|===
| パラメータ | タイプ | 説明 


| `password` | string | ストレージ クラスターとの通信に使用するパスワード。 


| `userId` | string | ストレージ クラスターとの通信に使用するユーザー ID (ユーザーには管理者権限が必要です)。 
|===
. *実行*を選択します。




== ストレージ クラスター アセットを削除する

ストレージ クラスターが使用されなくなった場合は、ストレージ クラスター アセットを削除できます。ストレージ クラスター アセットを削除すると、管理ノードから自動的に登録解除されます。


NOTE: 以下の手順に従ってください。<<ストレージ クラスタ アセットのインストール ID とクラスタ ID を取得します。>>続行する前に。

.手順
. 管理ノードのIPアドレスに続いて、ストレージサービスのREST API UIにアクセスします。 `/storage/1/` :
+
[listing]
----
https://<ManagementNodeIP>/storage/1/
----
. *承認*または任意のロックアイコンを選択し、次の手順に従います。
+
.. クラスターのユーザー名とパスワードを入力します。
.. クライアントIDを入力してください `mnode-client`。
.. セッションを開始するには、[承認] を選択します。
.. ウィンドウを閉じます。


. *DELETE /clusters/{storageId}* を選択します。
. *試してみる*を選択します。
. 先ほどコピーしたストレージクラスタIDを入力します。 `storageId`パラメータ。
. *実行*を選択します。
+
成功すると、API は空の応答を返します。



[discrete]
== 詳細情報の参照

* link:../concepts/concept_intro_clusters.html#authoritative-storage-clusters["権威あるクラスター"]
* https://docs.netapp.com/us-en/vcp/index.html["vCenter Server 用NetApp Elementプラグイン"^]
* https://docs.netapp.com/us-en/element-software/index.html["SolidFireおよびElementソフトウェアのドキュメント"]

