---
sidebar: sidebar 
permalink: hccstorage/task-hcc-manage-vol-management.html 
summary: ボリュームを作成し、そのボリュームを特定のアカウントに関連付ける方法を学習します。 
keywords: netapp, element, cluster, element, volume 
---
= NetApp Hybrid Cloud Control を使用してボリュームを作成および管理する
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
ボリュームを作成し、そのボリュームを特定のアカウントに関連付けることができます。ボリュームをアカウントに関連付けると、アカウントは iSCSI イニシエーターと CHAP 資格情報を通じてボリュームにアクセスできるようになります。

ボリュームの作成時に QoS 設定を指定できます。

NetApp Hybrid Cloud Control では、次の方法でボリュームを管理できます。

* <<ボリュームの作成>>
* <<ボリュームにQoSポリシーを適用する>>
* <<ボリュームを編集する>>
* <<クローン ボリューム>>
* <<ボリューム アクセス グループにボリュームを追加する>>
* <<ボリュームを削除する>>
* <<削除されたボリュームを復元する>>
* <<削除されたボリュームを消去する>>




== ボリュームの作成

NetApp Hybrid Cloud Control を使用してストレージ ボリュームを作成できます。

.手順
. Element ストレージ クラスタ管理者の資格情報を入力して、 NetApp Hybrid Cloud Control にログインします。
. ダッシュボードから、左側のナビゲーション メニューでストレージ クラスターの名前を展開します。
. *ボリューム* > *概要* タブを選択します。
+
image::hcc_volumes_overview_active.png[HCCボリュームページ > 概要タブの画像]

. *ボリュームの作成*を選択します。
. 新しいボリュームの名前を入力します。
. ボリュームの合計サイズを入力します。
+

NOTE: デフォルトのボリューム サイズの選択は GB 単位です。  GBまたはGiBで測定されたサイズを使用してボリュームを作成できます。1GB = 1 000 000 000バイト 1GiB = 1 073 741 824バイト

. ボリュームのブロック サイズを選択します。
. *アカウント* リストから、ボリュームへのアクセス権を持つアカウントを選択します。
+
アカウントが存在しない場合は、「*新しいアカウントの作成*」を選択し、新しいアカウント名を入力して、「*アカウントの作成*」を選択します。アカウントが作成され、*アカウント* リスト内の新しいボリュームに関連付けられます。

+

NOTE: アカウントが 50 を超える場合、リストは表示されません。入力を開始すると、オートコンプリート機能によって選択できる値が表示されます。

. ボリュームのサービス品質を構成するには、次のいずれかを実行します。
+
** *サービス品質設定* で、IOPS のカスタマイズされた最小値、最大値、バースト値を設定するか、デフォルトの QoS 値を使用します。
** *サービス品質ポリシーの割り当て*トグルを有効にし、結果のリストから既存の QoS ポリシーを選択して、既存の QoS ポリシーを選択します。
** *Quality of Service ポリシーの割り当て* トグルを有効にし、*新しい QoS ポリシーの作成* を選択して、新しい QoS ポリシーを作成して割り当てます。表示されるウィンドウで、QoS ポリシーの名前を入力し、QoS 値を入力します。完了したら、[*サービス品質ポリシーの作成*] を選択します。


+
最大 IOPS 値またはバースト IOPS 値が 20,000 IOPS を超えるボリュームでは、単一のボリュームでこのレベルの IOPS を達成するために、高いキュー深度または複数のセッションが必要になる場合があります。

. *ボリュームの作成*を選択します。




== ボリュームにQoSポリシーを適用する

NetApp Hybrid Cloud Control を使用して、既存のストレージ ボリュームに QoS ポリシーを適用できます。代わりにボリュームにカスタムQoS値を設定する必要がある場合は、<<ボリュームを編集する>> 。新しいQoSポリシーを作成するには、link:task-hcc-qos-policies.html["ボリュームQoSポリシーの作成と管理"^] 。

.手順
. Element ストレージ クラスタ管理者の資格情報を入力して、 NetApp Hybrid Cloud Control にログインします。
. ダッシュボードから、左側のナビゲーション メニューでストレージ クラスターの名前を展開します。
. *ボリューム* > *概要*を選択します。
. QoS ポリシーに関連付ける 1 つ以上のボリュームを選択します。
. ボリューム テーブルの上部にある *アクション* ドロップダウン リストを選択し、*QoS ポリシーの適用* を選択します。
. 表示されるウィンドウで、リストから QoS ポリシーを選択し、*QoS ポリシーの適用*を選択します。
+

NOTE: ボリュームで QoS ポリシーを使用している場合は、カスタム QoS を設定して、ボリュームと QoS ポリシーの関連付けを削除できます。カスタム QoS 値は、ボリューム QoS 設定の QoS ポリシー値をオーバーライドします。





== ボリュームを編集する

NetApp Hybrid Cloud Control を使用すると、QoS 値、ボリューム サイズ、バイト値を計算する測定単位などのボリューム属性を編集できます。レプリケーションの使用やボリュームへのアクセスを制限するために、アカウント アクセスを変更することもできます。

.タスク概要
次の条件下では、クラスターに十分なスペースがある場合は、ボリュームのサイズを変更できます。

* 通常の動作条件。
* ボリューム エラーまたは障害が報告されています。
* ボリュームのクローンを作成中です。
* ボリュームを再同期中です。


.手順
. Element ストレージ クラスタ管理者の資格情報を入力して、 NetApp Hybrid Cloud Control にログインします。
. ダッシュボードから、左側のナビゲーション メニューでストレージ クラスターの名前を展開します。
. *ボリューム* > *概要*を選択します。
. ボリューム テーブルの *アクション* 列で、ボリュームのメニューを展開し、*編集* を選択します。
. 必要に応じて変更を加えます。
+
.. ボリュームの合計サイズを変更します。
+

NOTE: ボリュームのサイズを大きくすることはできますが、小さくすることはできません。 1 回のサイズ変更操作でサイズ変更できるのは 1 つのボリュームのみです。ガベージ コレクション操作やソフトウェアのアップグレードによってサイズ変更操作が中断されることはありません。

+

NOTE: レプリケーションのボリューム サイズを調整する場合は、まずレプリケーション ターゲットとして割り当てられているボリュームのサイズを増やします。その後、ソースボリュームのサイズを変更できます。ターゲット ボリュームのサイズはソース ボリュームと同等かそれ以上にすることができますが、それより小さくすることはできません。

+

NOTE: デフォルトのボリューム サイズの選択は GB 単位です。  GBまたはGiBで測定されたサイズを使用してボリュームを作成できます。1GB = 1 000 000 000バイト 1GiB = 1 073 741 824バイト

.. 別のアカウント アクセス レベルを選択してください:
+
*** 読み取り専用
*** 読み取り / 書き込み
*** ロック
*** レプリケーション ターゲット


.. ボリュームへのアクセス権を持つアカウントを選択します。
+
入力を開始すると、オートコンプリート機能によって選択可能な値が表示されます。

+
アカウントが存在しない場合は、「*新しいアカウントの作成*」を選択し、新しいアカウント名を入力して、「*作成*」を選択します。アカウントが作成され、既存のボリュームに関連付けられます。

.. 次のいずれかを実行して、サービス品質を変更します。
+
... 既存のポリシーを選択します。
... 「カスタム設定」で、IOPS の最小値、最大値、バースト値を設定するか、デフォルト値を使用します。
+

NOTE: ボリュームで QoS ポリシーを使用している場合は、カスタム QoS を設定して、ボリュームと QoS ポリシーの関連付けを削除できます。カスタム QoS は、ボリューム QoS 設定の QoS ポリシー値を上書きします。

+

TIP: IOPS 値を変更する場合は、数十または数百単位で増加する必要があります。入力値には有効な整数が必要です。非常に高いバースト値でボリュームを構成します。これにより、システムはボリュームの持続的な IOPS を制限しながら、時折発生する大きなブロックの連続ワークロードをより迅速に処理できるようになります。





. *保存*を選択します。




== クローン ボリューム

単一のストレージ ボリュームのクローンを作成したり、ボリュームのグループのクローンを作成してデータのポイントインタイム コピーを作成したりできます。ボリュームのクローンを作成すると、システムはボリュームのスナップショットを作成し、スナップショットによって参照されるデータのコピーを作成します。

.開始する前に
* 少なくとも 1 つのクラスターを追加して実行する必要があります。
* 少なくとも 1 つのボリュームが作成されました。
* ユーザーアカウントが作成されました。
* 使用可能な未プロビジョニング領域は、ボリューム サイズ以上である必要があります。


.タスク概要
クラスターは、ボリュームごとに一度に最大 2 つの実行中のクローン要求と、一度に最大 8 つのアクティブなボリューム クローン操作をサポートします。これらの制限を超えるリクエストは、後で処理するためにキューに入れられます。

ボリュームのクローン作成は非同期プロセスであり、プロセスに必要な時間はクローン作成するボリュームのサイズと現在のクラスターの負荷によって異なります。


NOTE: クローンボリュームは、ソースボリュームからボリューム アクセス グループのメンバーシップを継承しません。

.手順
. Element ストレージ クラスタ管理者の資格情報を入力して、 NetApp Hybrid Cloud Control にログインします。
. ダッシュボードから、左側のナビゲーション メニューでストレージ クラスターの名前を展開します。
. *ボリューム* > *概要* タブを選択します。
. クローンを作成する各ボリュームを選択します。
. ボリューム テーブルの上部にある [*アクション*] ドロップダウン リストを選択し、[*クローン*] を選択します。
. 表示されたウィンドウで、次の操作を行います。
+
.. ボリューム名のプレフィックスを入力します (これはオプションです)。
.. *アクセス* リストからアクセス タイプを選択します。
.. 新しいボリューム クローンと関連付けるアカウントを選択します (デフォルトでは、[ボリュームからコピー] が選択されており、元のボリュームが使用するのと同じアカウントが使用されます)。
.. アカウントが存在しない場合は、「*新しいアカウントの作成*」を選択し、新しいアカウント名を入力して、「*アカウントの作成*」を選択します。アカウントが作成され、ボリュームに関連付けられます。
+

TIP: 説明的な命名のベストプラクティスを使用します。これは、環境内で複数のクラスタまたは vCenter Server が使用されている場合に特に重要です。

+

NOTE: クローンのボリューム サイズを増やすと、ボリュームの最後に空き領域が追加された新しいボリュームが作成されます。ボリュームの使用方法に応じて、空き領域を活用するためにパーティションを拡張するか、新しいパーティションを作成する必要がある場合があります。

.. *ボリュームのクローン*を選択します。
+

NOTE: クローン作成操作を完了するまでの時間は、ボリューム サイズと現在のクラスター負荷によって影響を受けます。クローンされたボリュームがボリューム リストに表示されない場合は、ページを更新してください。







== ボリューム アクセス グループにボリュームを追加する

ボリューム アクセス グループに単一のボリュームまたはボリュームのグループを追加できます。

.手順
. Element ストレージ クラスタ管理者の資格情報を入力して、 NetApp Hybrid Cloud Control にログインします。
. ダッシュボードから、左側のナビゲーション メニューでストレージ クラスターの名前を展開します。
. *ボリューム* > *概要*を選択します。
. ボリューム アクセス グループに関連付ける 1 つ以上のボリュームを選択します。
. ボリューム テーブルの上部にある *アクション* ドロップダウン リストを選択し、*アクセス グループに追加* を選択します。
. 表示されるウィンドウで、*ボリューム アクセス グループ* リストからボリューム アクセス グループを選択します。
. *ボリュームの追加*を選択します。




== ボリュームを削除する

Element ストレージ クラスターから 1 つ以上のボリュームを削除できます。

.タスク概要
削除されたボリュームはすぐには消去されず、約 8 時間は利用可能なままになります。 8 時間後には削除され、利用できなくなります。この間にリストアしたボリュームはオンラインに戻り、iSCSI接続が再度確立されます。

スナップショットの作成に使用されたボリュームが削除されると、それに関連付けられたスナップショットは非アクティブになります。削除されたソース ボリュームが消去されると、関連付けられている非アクティブなスナップショットもシステムから削除されます。


IMPORTANT: 管理サービスに関連付けられた永続ボリュームは、インストールまたはアップグレード中に作成され、新しいアカウントに割り当てられます。永続ボリュームを使用している場合は、ボリュームまたはそれに関連付けられたアカウントを変更または削除しないでください。これらのボリュームを削除すると、管理ノードが使用できなくなる可能性があります。

.手順
. Element ストレージ クラスタ管理者の資格情報を入力して、 NetApp Hybrid Cloud Control にログインします。
. ダッシュボードから、左側のナビゲーション メニューでストレージ クラスターの名前を展開します。
. *ボリューム* > *概要*を選択します。
. 削除するボリュームを 1 つ以上選択します。
. ボリューム テーブルの上部にある [*アクション*] ドロップダウン リストを選択し、[*削除*] を選択します。
. 表示されるウィンドウで、[*はい*] を選択してアクションを確認します。




== 削除されたボリュームを復元する

ストレージ ボリュームを削除した後でも、削除後 8 時間以内であれば復元できます。

削除されたボリュームはすぐには消去されず、約 8 時間は利用可能なままになります。 8 時間後には削除され、利用できなくなります。この間にリストアしたボリュームはオンラインに戻り、iSCSI接続が再度確立されます。

.手順
. Element ストレージ クラスタ管理者の資格情報を入力して、 NetApp Hybrid Cloud Control にログインします。
. ダッシュボードから、左側のナビゲーション メニューでストレージ クラスターの名前を展開します。
. *ボリューム* > *概要*を選択します。
. *削除済み*を選択します。
. ボリューム テーブルの *アクション* 列で、ボリュームのメニューを展開し、*復元* を選択します。
. *はい*を選択してプロセスを確認します。




== 削除されたボリュームを消去する

ストレージ ボリュームは削除された後も、約 8 時間は利用可能です。  8 時間経過すると自動的に削除され、利用できなくなります。  8時間待ちたくない場合は削除できます

.手順
. Element ストレージ クラスタ管理者の資格情報を入力して、 NetApp Hybrid Cloud Control にログインします。
. ダッシュボードから、左側のナビゲーション メニューでストレージ クラスターの名前を展開します。
. *ボリューム* > *概要*を選択します。
. *削除済み*を選択します。
. 消去するボリュームを 1 つ以上選択します。
. 次のいずれかを実行します。
+
** 複数のボリュームを選択した場合は、テーブルの上部にある *Purge* クイック フィルターを選択します。
** 単一のボリュームを選択した場合は、ボリューム テーブルの *アクション* 列で、ボリュームのメニューを展開し、*パージ* を選択します。


. ボリューム テーブルの *アクション* 列で、ボリュームのメニューを展開し、*パージ* を選択します。
. *はい*を選択してプロセスを確認します。


[discrete]
== 詳細情報の参照

* link:../concepts/concept_solidfire_concepts_volumes.html["ボリュームについて学ぶ"]
* https://docs.netapp.com/us-en/element-software/index.html["SolidFireおよびElementソフトウェアのドキュメント"^]
* https://docs.netapp.com/us-en/vcp/index.html["vCenter Server 用NetApp Elementプラグイン"^]
* https://docs.netapp.com/us-en/element-software/index.html["SolidFireおよびElementソフトウェアのドキュメント"]

