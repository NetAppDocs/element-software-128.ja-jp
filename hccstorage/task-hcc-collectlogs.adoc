---
sidebar: sidebar 
permalink: hccstorage/task-hcc-collectlogs.html 
summary: NetApp Hybrid Cloud Control を使用すると、Element インストールからログを収集し、トラブルシューティングに役立てることができます。 
keywords: netapp, element, logs, collection, troubleshooting, monitor 
---
= トラブルシューティングのためにログを収集する
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
SolidFireオールフラッシュ ストレージのインストールで問題が発生した場合、ログを収集してNetAppサポートに送信し、診断に役立てることができます。  Element システムでログを収集するには、 NetApp Hybrid Cloud Control または REST API を使用できます。

.要件
* ストレージ クラスタのバージョンでNetApp Elementソフトウェア 11.3 以降が実行されていることを確認します。
* バージョン 11.3 以降を実行している管理ノードがデプロイされていることを確認します。


.ログ収集オプション
次のいずれかのオプションを選択します。

* <<NetApp Hybrid Cloud Controlを使用してログを収集する>>
* <<REST APIを使用してログを収集する>>




== NetApp Hybrid Cloud Controlを使用してログを収集する

NetApp Hybrid Cloud Control ダッシュボードからログ収集領域にアクセスできます。

.手順
. 管理ノードの IP アドレスを Web ブラウザで開きます。例えば：
+
[listing]
----
https://[management node IP address]
----
. Element ストレージ クラスタ管理者の資格情報を入力して、 NetApp Hybrid Cloud Control にログインします。
. ダッシュボードから、右上のメニューを選択します。
. *ログを収集*を選択します。
+
以前にログを収集したことがある場合は、既存のログ パッケージをダウンロードするか、新しいログ収集を開始できます。

. *日付範囲*ドロップダウン メニューで日付範囲を選択して、ログに含める日付を指定します。
+
カスタム開始日を指定する場合、日付範囲を開始する日付を選択できます。その日付から現在までのログが収集されます。

. *ログ収集*セクションで、ログ パッケージに含めるログ ファイルの種類を選択します。
+
ストレージ ログの場合、ストレージ ノードのリストを展開し、ログを収集する個々のノード (またはリスト内のすべてのノード) を選択できます。

. ログ収集を開始するには、[ログの収集] を選択します。
+
ログ収集はバックグラウンドで実行され、ページに進行状況が表示されます。

+

NOTE: 収集するログによっては、進行状況バーが数分間特定のパーセンテージで維持されたり、ある時点で非常にゆっくりと進行したりする場合があります。

. ログ パッケージをダウンロードするには、[ログのダウンロード] を選択します。
+
ログ パッケージは、圧縮された UNIX .tgz ファイル形式です。





== REST APIを使用してログを収集する

REST API を使用して Element ログを収集できます。

.手順
. ストレージ クラスター ID を見つけます。
+
.. 管理ノードで管理ノード REST API UI を開きます。
+
[listing]
----
https://[management node IP]/logs/1/
----
.. *承認*を選択し、以下を完了します。
+
... クラスターのユーザー名とパスワードを入力します。
... クライアントIDを入力してください `mnode-client`値がまだ入力されていない場合。
... セッションを開始するには、[承認] を選択します。




. 要素からログを収集します。
+
.. *POST /bundle*を選択します。
.. *試してみる*を選択します。
.. 収集する必要があるログの種類と時間範囲に応じて、*リクエスト本文* フィールドの次のパラメータの値を変更します。
+
|===
| パラメータ | タイプ | 説明 


| `modifiedSince` | 日付文字列 | この日時以降に変更されたログのみを含めます。たとえば、値「2020-07-14T20:19:00.000Z」は、2020 年 7 月 14 日 20:19 UTC の開始日を定義します。 


| `mnodeLogs` | ブーリアン | このパラメータを `true`管理ノードのログを含めます。 


| `storageCrashDumps` | ブーリアン | このパラメータを `true`ストレージ ノードのクラッシュ デバッグ ログを含めます。 


| `storageLogs` | ブーリアン | このパラメータを `true`ストレージ ノード ログを含めます。 


| `storageNodeIds` | UUID配列 | もし `storageLogs`設定されている `true`、このパラメータにストレージ クラスター ノード ID を入力して、ログ収集を特定のストレージ ノードに制限します。使用 `GET https://[management node IP]/logs/1/bundle/options`エンドポイントにアクセスして、使用できるすべてのノード ID を確認します。 
|===
.. ログ収集を開始するには、[実行] を選択します。応答では次のようなものが返されるはずです。
+
[listing]
----
{
  "_links": {
    "self": "https://10.1.1.5/logs/1/bundle"
  },
  "taskId": "4157881b-z889-45ce-adb4-92b1843c53ee",
  "taskLink": "https://10.1.1.5/logs/1/bundle"
}
----


. ログ収集タスクのステータスを確認します。
+
.. *GET /bundle*を選択します。
.. *試してみる*を選択します。
.. 収集タスクのステータスを返すには、「実行」を選択します。
.. レスポンス本文の一番下までスクロールします。
+
表示されるはずです `percentComplete`コレクションの進行状況を詳細に示す属性。コレクションが完了したら、 `downloadLink`属性には、ログ パッケージのファイル名を含む完全なダウンロード リンクが含まれます。

.. 末尾のファイル名をコピーします `downloadLink`属性。


. 収集されたログ パッケージをダウンロードします。
+
.. *GET /bundle/{filename}* を選択します。
.. *試してみる*を選択します。
.. 先ほどコピーしたファイル名を `filename`パラメータテキストフィールド。
.. *実行*を選択します。
+
実行後、レスポンス本文領域にダウンロード リンクが表示されます。

.. *ファイルのダウンロード*を選択し、結果のファイルをコンピューターに保存します。
+
ログ パッケージは、圧縮された UNIX .tgz ファイル形式です。





[discrete]
== 詳細情報の参照

* https://docs.netapp.com/us-en/vcp/index.html["vCenter Server 用NetApp Elementプラグイン"^]
* https://docs.netapp.com/us-en/element-software/index.html["SolidFireおよびElementソフトウェアのドキュメント"]

